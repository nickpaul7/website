<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Nick Paul&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="/img/home-bg-jeep.jpg">
    <meta property="twitter:image" content="/img/home-bg-jeep.jpg" />
    

    
    <meta name="title" content="Data Science Toolkit: Web Scraping with R" />
    <meta property="og:title" content="Data Science Toolkit: Web Scraping with R" />
    <meta property="twitter:title" content="Data Science Toolkit: Web Scraping with R" />
    

    
    <meta name="description" content="Web Scraping is a must-have tool for every data scientist. In this post, we walk through the basics to get you up and running with web scraping in R.">
    <meta property="og:description" content="Web Scraping is a must-have tool for every data scientist. In this post, we walk through the basics to get you up and running with web scraping in R." />
    <meta property="twitter:description" content="Web Scraping is a must-have tool for every data scientist. In this post, we walk through the basics to get you up and running with web scraping in R." />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Nick Paul, Analyltics">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>Data Science Toolkit: Web Scraping with R-Nick Paul Blog</title>

    <link rel="canonical" href="/post/2022-02-01-webscraping101/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Nick Paul&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/analytics">analytics</a>
                        </li>
                        
                        <li>
                            <a href="/categories/data-collection">data-collection</a>
                        </li>
                        
                        <li>
                            <a href="/categories/data-visualization">data-visualization</a>
                        </li>
                        
                        <li>
                            <a href="/categories/excel-tools">excel-tools</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/archive/">ARCHIVE</a></li>
                    

                    
		    <li>
                        <a href="/search"><i class="fa fa-search"></i></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/home-bg-jeep.jpg')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/r" title="R">
                            R
                        </a>
                        
                    </div>
                    <h1>Data Science Toolkit: Web Scraping with R</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                 Nick Paul
                             
                            on 
                            Tuesday, February 1, 2022
                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                
                
                


<ol style="list-style-type: decimal">
<li><a href="#web-scraping-basics">Web Scraping Basics</a></li>
<li><a href="#elements">Elements</a></li>
<li><a href="#simple-example">Simple Example</a></li>
<li><a href="#css-selectors">CSS Selectors</a></li>
<li><a href="#real-world-example">Real World Example</a></li>
</ol>
<p>Web Scraping is important tool every Data Scientist should be familiar with. Often the data a client wants to analyze is not neatly packed in jsons or an enterprise data base, and you need to collect it yourself. When the data you need is on a webpage and there is no API available, web scraping will be the tool you need.</p>
<p>Today we will walk through a simple example where we need to collect a table from a web page. Our goal will be to collect all the hall of fame pitchers from <a href="https://www.baseball-reference.com/">Baseball Reference</a>.</p>
<div id="web-scraping-basics" class="section level2">
<h2>Web Scraping Basics</h2>
<p>Web Scarping is the process of parsing HTML <code>elements</code>, which consist of <code>tags</code> that delineate the start and end of an <code>element</code> and optional <code>attributes</code> that describe the element.</p>
</div>
<div id="elements" class="section level2">
<h2>Elements</h2>
<p>Below are some of the most common elements.</p>
<ul>
<li><code>&lt;html&gt;</code>…<code>&lt;/html&gt;</code> — The root element</li>
<li><code>&lt;head&gt;</code>…<code>&lt;/head&gt;</code> — The document head</li>
<li><code>&lt;title&gt;</code>…<code>&lt;/title&gt;</code> — The page title</li>
<li><code>&lt;body&gt;</code>…<code>&lt;/body&gt;</code> — The page’s content</li>
<li><code>&lt;h1&gt;</code>…<code>&lt;/h1&gt;</code> — A section heading.</li>
<li><code>&lt;p&gt;</code>…<code>&lt;/p&gt;</code> — A paragraph.</li>
<li><code>&lt;a&gt;</code>…<code>&lt;/a&gt;</code> — A link.</li>
<li><code>&lt;img&gt;</code> — An image.</li>
</ul>
<p>Check out this <a href="https://www.elated.com/first-10-html-tags/">site</a> for more info.</p>
<p>Here is a basic page:</p>
<pre class="r"><code>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Heading 1&lt;/h1&gt;
  &lt;p&gt;This is a paragraph&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
<div id="simple-example" class="section level2">
<h2>Simple Example</h2>
<p>To conduct our first web scraping task, we will use the <code>read_html()</code> function to convert our raw html into an html document object we can parse. Next, we will use the <code>html_node()</code> function to select the <code>h1</code> element. Finally, we will use <code>html_text()</code> to extract the content in between the <code>h1</code> tags.</p>
<pre class="r"><code>library(rvest)
library(dplyr)
library(readr)</code></pre>
<pre class="r"><code>raw_html &lt;- &#39;&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Heading 1&lt;/h1&gt;
  &lt;p&gt;This is a paragraph&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;&#39;

html &lt;- read_html(raw_html)
html</code></pre>
<pre><code>## {html_document}
## &lt;html&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
## [2] &lt;body&gt;\n  &lt;h1&gt;Heading 1&lt;/h1&gt;\n  &lt;p&gt;This is a paragraph&lt;/p&gt;\n&lt;/body&gt;</code></pre>
<pre class="r"><code>html %&gt;% 
    html_nodes(&quot;h1&quot;) %&gt;%  # grab the h1 elements
    html_text()           # extract the content</code></pre>
<pre><code>## [1] &quot;Heading 1&quot;</code></pre>
</div>
<div id="css-selectors" class="section level2">
<h2>CSS Selectors</h2>
<p>While selecting by elements is pretty straight forward, elements are often repeated multiple times on a single page. To make our request more specific, we can use CSS selectors.</p>
<p>CSS is used to style of the content of html documents, and CSS selectors are used to match CSS rules to elements in the html. We can use CSS selectors to traverse complicated HTML structure and extract the exact data we need. Below are the most common selectors I have used.</p>
<ul>
<li><code>Element</code> Selector</li>
<li><code>Class</code> Selector</li>
<li><code>ID</code> Selector</li>
</ul>
<p>Let’s walk through a simple example.</p>
<pre class="r"><code>raw_html &lt;- &quot;&lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;My Website&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1 id = &#39;header1&#39;&gt;Heading 1&lt;/h1&gt;
      &lt;p&gt;This is a paragraph&lt;/p&gt;
      &lt;h1 class = &#39;header&#39;&gt;Heading 2&lt;/h1&gt;
      &lt;p&gt;This is a paragraph&lt;/p&gt;
      &lt;h1 class = &#39;header&#39;&gt;Heading 3&lt;/h1&gt;
        &lt;p&gt;This is a paragraph&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;&quot;

html &lt;- read_html(raw_html)
html</code></pre>
<pre><code>## {html_document}
## &lt;html&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
## [2] &lt;body&gt;\n      &lt;h1 id=&quot;header1&quot;&gt;Heading 1&lt;/h1&gt;\n      &lt;p&gt;This is a paragra ...</code></pre>
<p>Below is how we can select by <code>element</code>, <code>class</code>, or <code>id</code>.</p>
<ul>
<li><code>Element</code> Selector: use <code>h1</code> to select all <code>&lt;h1&gt;</code> elements</li>
<li><code>Class</code> Selector: use <code>.header</code> to select all elements with <code>class</code> <code>header</code></li>
<li><code>ID</code> Selector: use <code>#header1</code> to select the element with <code>id</code> attribute <code>header1</code></li>
</ul>
<p>Now, let’s write the code to complete each of these tasks.</p>
<p>To get all the heading content, we use the <code>h1</code> selector.</p>
<pre class="r"><code>html %&gt;% 
    html_nodes(&quot;h1&quot;) %&gt;% 
    html_text()</code></pre>
<pre><code>## [1] &quot;Heading 1&quot; &quot;Heading 2&quot; &quot;Heading 3&quot;</code></pre>
<p>To get the second and third headings, we can use the <code>.header</code> selector since both elements belong to the <code>header</code> <code>class</code>.</p>
<pre class="r"><code>html %&gt;% 
    html_nodes(&quot;.header&quot;) %&gt;% 
    html_text()</code></pre>
<pre><code>## [1] &quot;Heading 2&quot; &quot;Heading 3&quot;</code></pre>
<p>Finally, we can use the<code>#header</code> selector to get the content from the first heading. Note, <code>id</code> is unique for a particular element and cannot be repeated. Because of this fact, if an element has an <code>id</code>, it is often the easiest selector to use.</p>
<pre class="r"><code>html %&gt;% 
    html_nodes(&quot;#header1&quot;) %&gt;% 
    html_text()</code></pre>
<pre><code>## [1] &quot;Heading 1&quot;</code></pre>
<p>If you want more practice with CSS selectors, check out this <a href="https://flukeout.github.io/">page</a>.</p>
</div>
<div id="real-world-example" class="section level2">
<h2>Real World Example</h2>
<p>Now that we have reviewed the basics. Let’s try a real world example: scraping the hall-of-fame pitchers from <a href="%22https://www.baseball-reference.com/awards/hof_pitching.shtml">https://www.baseball-reference.com/awards/hof_pitching.shtml</a>.</p>
</div>
<div id="finding-the-css-selector" class="section level2">
<h2>Finding the CSS Selector</h2>
<p>Luckily, most browsers offer support to find the selector you need without having to parse the entire html document. To get started, right-click on a page and select the inspect option. Next, as you can see in the screenshot below, click the the select tool and hover over the the part of the webpage that has your data. Once your data is in the blue box, left-click and the html element will appear on the right side. It will also show the CSS selector for that particular element in the box above your selection.</p>
<div class="figure">
<img src="hof_pitchers.png" alt="CSS Selector" style="width:100.0%" />
<p class="caption">CSS Selector</p>
</div>
<p>You can even right click on the element in the window in the top right corner and copy the selector.</p>
<div class="figure">
<img src="copy_css_selector.png" alt="Copy CSS Selector" style="width:100.0%" />
<p class="caption">Copy CSS Selector</p>
</div>
</div>
<div id="extract-the-data" class="section level2">
<h2>Extract the Data</h2>
<p>Now that we have the selector, we can grab the data we need. Let’s start by reading the html.</p>
<pre class="r"><code>url &lt;- &quot;https://www.baseball-reference.com/awards/hof_pitching.shtml&quot;
html &lt;- read_html(url)
html</code></pre>
<pre><code>## {html_document}
## &lt;html data-version=&quot;klecko-&quot; data-root=&quot;/home/br/build&quot; itemscope=&quot;&quot; itemtype=&quot;https://schema.org/WebSite&quot; lang=&quot;en&quot; class=&quot;no-js&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
## [2] &lt;body class=&quot;br&quot;&gt;\n&lt;div id=&quot;wrap&quot;&gt;\n  \n  &lt;div id=&quot;header&quot; role=&quot;banner&quot;&gt; ...</code></pre>
<p>Now we can grab the table using the <code>#hof_pitching</code> selector and will convert the table to a data frame using the <code>html_table()</code> function.</p>
<pre class="r"><code>df_raw_pitchers &lt;- html %&gt;%
        html_node(&quot;#hof_pitching&quot;) %&gt;% 
        html_table()

glimpse(df_raw_pitchers )</code></pre>
<pre><code>## Observations: 88
## Variables: 30
## $ Rk       &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…
## $ Name     &lt;chr&gt; &quot;Pete Alexander&quot;, &quot;Charles Bender&quot;, &quot;Bert Blyleven&quot;, &quot;Mordec…
## $ Inducted &lt;int&gt; 1938, 1953, 2011, 1949, 2006, 1996, 1994, 1946, 1963, 2006, …
## $ Yrs      &lt;int&gt; 20, 16, 22, 14, 14, 17, 24, 11, 12, 14, 14, 6, 10, 12, 14, 2…
## $ From     &lt;int&gt; 1911, 1903, 1970, 1903, 1931, 1955, 1965, 1899, 1882, 1920, …
## $ To       &lt;int&gt; 1930, 1925, 1992, 1916, 1945, 1971, 1988, 1909, 1894, 1939, …
## $ ASG      &lt;int&gt; 0, 0, 2, 0, 2, 9, 10, 0, 0, 2, 0, 0, 9, 4, 9, 6, 0, 8, 7, 10…
## $ WAR      &lt;dbl&gt; 115.98, 42.70, 96.09, 57.26, 32.73, 60.33, 84.13, 42.47, 84.…
## $ W        &lt;int&gt; 373, 212, 287, 239, 122, 224, 329, 198, 328, 118, 215, 145, …
## $ L        &lt;int&gt; 208, 127, 250, 130, 45, 184, 244, 132, 178, 64, 142, 94, 21,…
## $ `W-L%`   &lt;dbl&gt; 0.642, 0.625, 0.534, 0.648, 0.731, 0.549, 0.574, 0.600, 0.64…
## $ ERA      &lt;dbl&gt; 2.56, 2.46, 3.31, 2.06, 3.02, 3.27, 3.22, 2.68, 2.81, 3.58, …
## $ G        &lt;int&gt; 696, 459, 692, 481, 215, 591, 741, 392, 531, 288, 450, 242, …
## $ GS       &lt;int&gt; 600, 334, 685, 332, 156, 519, 709, 332, 518, 183, 385, 241, …
## $ GF       &lt;int&gt; 81, 112, 3, 138, 22, 39, 13, 52, 12, 44, 52, 2, 2, 77, 34, 5…
## $ CG       &lt;int&gt; 436, 255, 242, 271, 139, 151, 254, 260, 485, 105, 223, 233, …
## $ SHO      &lt;int&gt; 90, 40, 60, 55, 18, 40, 55, 35, 37, 12, 38, 19, 8, 26, 49, 2…
## $ SV       &lt;int&gt; 32, 34, 0, 49, 13, 16, 2, 5, 5, 24, 21, 0, 3, 31, 6, 390, 27…
## $ IP       &lt;dbl&gt; 5190.0, 3017.0, 4970.0, 3172.1, 1477.0, 3760.1, 5217.2, 2896…
## $ H        &lt;int&gt; 4868, 2645, 4632, 2708, 1388, 3433, 4672, 2647, 4295, 1585, …
## $ R        &lt;int&gt; 1852, 1108, 2029, 1044, 641, 1527, 2130, 1206, 2384, 811, 12…
## $ ER       &lt;int&gt; 1476, 823, 1830, 725, 495, 1366, 1864, 864, 1417, 638, 990, …
## $ HR       &lt;int&gt; 165, 40, 430, 43, 26, 372, 414, 39, 159, 52, 66, 12, 15, 95,…
## $ BB       &lt;int&gt; 951, 712, 1322, 673, 392, 1000, 1833, 690, 1191, 357, 802, 1…
## $ IBB      &lt;int&gt; 8, NA, 71, NA, 0, 98, 150, NA, NA, 1, 0, NA, 0, 47, 123, 91,…
## $ SO       &lt;int&gt; 2198, 1711, 3701, 1375, 690, 2855, 4136, 1265, 1978, 719, 98…
## $ HBP      &lt;int&gt; 70, 102, 155, 61, 28, 160, 53, 113, 80, 42, 30, NA, 14, 27, …
## $ BK       &lt;int&gt; 1, 10, 19, 4, 0, 8, 90, 2, 0, 2, 1, 0, 0, 5, 10, 16, 2, 13, …
## $ WP       &lt;int&gt; 38, 79, 114, 61, 4, 47, 183, 62, 182, 11, 35, 67, 1, 12, 82,…
## $ BF       &lt;int&gt; 20893, 11901, 20491, 12450, 3601, 15618, 21683, 11632, 19146…</code></pre>
<p>There you have it, the data we wanted in a data frame.</p>
</div>
<div id="data-cleaning" class="section level2">
<h2>Data Cleaning</h2>
<p>While the process above seemed very simple, web scraping is usually not this easy.</p>
<p>One task you will often have to complete with web scrapping is cleaning your data after extraction. In this example, the last row has the value “Average Pitching HOFer”, which would throw off our analysis if we did not know it was there. Always be sure to inspect the returned results for anomalies.</p>
<pre class="r"><code>df_final &lt;- df_raw_pitchers %&gt;% 
    filter(!stringr::str_detect(Name, &quot;Average&quot;))
glimpse(df_final)</code></pre>
<pre><code>## Observations: 87
## Variables: 30
## $ Rk       &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…
## $ Name     &lt;chr&gt; &quot;Pete Alexander&quot;, &quot;Charles Bender&quot;, &quot;Bert Blyleven&quot;, &quot;Mordec…
## $ Inducted &lt;int&gt; 1938, 1953, 2011, 1949, 2006, 1996, 1994, 1946, 1963, 2006, …
## $ Yrs      &lt;int&gt; 20, 16, 22, 14, 14, 17, 24, 11, 12, 14, 14, 6, 10, 12, 14, 2…
## $ From     &lt;int&gt; 1911, 1903, 1970, 1903, 1931, 1955, 1965, 1899, 1882, 1920, …
## $ To       &lt;int&gt; 1930, 1925, 1992, 1916, 1945, 1971, 1988, 1909, 1894, 1939, …
## $ ASG      &lt;int&gt; 0, 0, 2, 0, 2, 9, 10, 0, 0, 2, 0, 0, 9, 4, 9, 6, 0, 8, 7, 10…
## $ WAR      &lt;dbl&gt; 115.98, 42.70, 96.09, 57.26, 32.73, 60.33, 84.13, 42.47, 84.…
## $ W        &lt;int&gt; 373, 212, 287, 239, 122, 224, 329, 198, 328, 118, 215, 145, …
## $ L        &lt;int&gt; 208, 127, 250, 130, 45, 184, 244, 132, 178, 64, 142, 94, 21,…
## $ `W-L%`   &lt;dbl&gt; 0.642, 0.625, 0.534, 0.648, 0.731, 0.549, 0.574, 0.600, 0.64…
## $ ERA      &lt;dbl&gt; 2.56, 2.46, 3.31, 2.06, 3.02, 3.27, 3.22, 2.68, 2.81, 3.58, …
## $ G        &lt;int&gt; 696, 459, 692, 481, 215, 591, 741, 392, 531, 288, 450, 242, …
## $ GS       &lt;int&gt; 600, 334, 685, 332, 156, 519, 709, 332, 518, 183, 385, 241, …
## $ GF       &lt;int&gt; 81, 112, 3, 138, 22, 39, 13, 52, 12, 44, 52, 2, 2, 77, 34, 5…
## $ CG       &lt;int&gt; 436, 255, 242, 271, 139, 151, 254, 260, 485, 105, 223, 233, …
## $ SHO      &lt;int&gt; 90, 40, 60, 55, 18, 40, 55, 35, 37, 12, 38, 19, 8, 26, 49, 2…
## $ SV       &lt;int&gt; 32, 34, 0, 49, 13, 16, 2, 5, 5, 24, 21, 0, 3, 31, 6, 390, 27…
## $ IP       &lt;dbl&gt; 5190.0, 3017.0, 4970.0, 3172.1, 1477.0, 3760.1, 5217.2, 2896…
## $ H        &lt;int&gt; 4868, 2645, 4632, 2708, 1388, 3433, 4672, 2647, 4295, 1585, …
## $ R        &lt;int&gt; 1852, 1108, 2029, 1044, 641, 1527, 2130, 1206, 2384, 811, 12…
## $ ER       &lt;int&gt; 1476, 823, 1830, 725, 495, 1366, 1864, 864, 1417, 638, 990, …
## $ HR       &lt;int&gt; 165, 40, 430, 43, 26, 372, 414, 39, 159, 52, 66, 12, 15, 95,…
## $ BB       &lt;int&gt; 951, 712, 1322, 673, 392, 1000, 1833, 690, 1191, 357, 802, 1…
## $ IBB      &lt;int&gt; 8, NA, 71, NA, 0, 98, 150, NA, NA, 1, 0, NA, 0, 47, 123, 91,…
## $ SO       &lt;int&gt; 2198, 1711, 3701, 1375, 690, 2855, 4136, 1265, 1978, 719, 98…
## $ HBP      &lt;int&gt; 70, 102, 155, 61, 28, 160, 53, 113, 80, 42, 30, NA, 14, 27, …
## $ BK       &lt;int&gt; 1, 10, 19, 4, 0, 8, 90, 2, 0, 2, 1, 0, 0, 5, 10, 16, 2, 13, …
## $ WP       &lt;int&gt; 38, 79, 114, 61, 4, 47, 183, 62, 182, 11, 35, 67, 1, 12, 82,…
## $ BF       &lt;int&gt; 20893, 11901, 20491, 12450, 3601, 15618, 21683, 11632, 19146…</code></pre>
</div>
<div id="extracting-additional-info" class="section level2">
<h2>Extracting Additional Info</h2>
<p>We may also want more than just the text content of the table. For example, the player names on the website are links to that players page. We may want those links so we can scrape those pages for additional data.</p>
<p>If we inspect the players name, we find the html element below:</p>
<pre class="r"><code>&lt;a href=&quot;/players/a/alexape01.shtml&quot;&gt;Pete Alexander&lt;/a&gt;</code></pre>
<p>An <code>a</code> tag is used for links and will have a <code>href</code> attribute for the link.
Instead of grabbing the text, we now want to grab the <code>href</code> attribute from the <code>a</code> element.</p>
<p>To get all the player links, we first grab the <code>a</code> elements from he table. Next, we use the <code>html_attr()</code> function to get the <code>href</code> attribute. Finally, to use this link, we need to add the baseball reference URL to the front of the link.</p>
<pre class="r"><code>player_links &lt;- html %&gt;%
    html_node(&quot;#hof_pitching&quot;) %&gt;% 
    html_nodes(&quot;a&quot;) %&gt;% 
    html_attr(&quot;href&quot;) %&gt;% 
    stringr::str_c(&quot;https://www.baseball-reference.com&quot;, .)

player_links[1]</code></pre>
<pre><code>## [1] &quot;https://www.baseball-reference.com/players/a/alexape01.shtml&quot;</code></pre>
<p>Now that we have the link to every players page, we can use the same process from above to get the year-by-year pitching data from each payers page, assuming that all the pages have the same structure.</p>
<p>Below is an example of collecting the year-by-year pitching data for the first HOFer on our list.</p>
<pre class="r"><code>player_df &lt;- player_links[1] %&gt;% 
    read_html() %&gt;% 
    html_node(&#39;#pitching_standard&#39;) %&gt;% 
    html_table()

glimpse(player_df)</code></pre>
<pre><code>## Observations: 28
## Variables: 35
## $ Year   &lt;chr&gt; &quot;1911&quot;, &quot;1912&quot;, &quot;1913&quot;, &quot;1914&quot;, &quot;1915&quot;, &quot;1916&quot;, &quot;1917&quot;, &quot;1918&quot;…
## $ Age    &lt;chr&gt; &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;, &quot;31&quot;, &quot;32&quot;, &quot;33&quot;, &quot;3…
## $ Tm     &lt;chr&gt; &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;CHC&quot;, &quot;CHC&quot;,…
## $ Lg     &lt;chr&gt; &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;N…
## $ W      &lt;chr&gt; &quot;28&quot;, &quot;19&quot;, &quot;22&quot;, &quot;27&quot;, &quot;31&quot;, &quot;33&quot;, &quot;30&quot;, &quot;2&quot;, &quot;16&quot;, &quot;27&quot;, &quot;15…
## $ L      &lt;chr&gt; &quot;13&quot;, &quot;17&quot;, &quot;8&quot;, &quot;15&quot;, &quot;10&quot;, &quot;12&quot;, &quot;13&quot;, &quot;1&quot;, &quot;11&quot;, &quot;14&quot;, &quot;13&quot;…
## $ `W-L%` &lt;chr&gt; &quot;.683&quot;, &quot;.528&quot;, &quot;.733&quot;, &quot;.643&quot;, &quot;.756&quot;, &quot;.733&quot;, &quot;.698&quot;, &quot;.667&quot;…
## $ ERA    &lt;chr&gt; &quot;2.57&quot;, &quot;2.81&quot;, &quot;2.79&quot;, &quot;2.38&quot;, &quot;1.22&quot;, &quot;1.55&quot;, &quot;1.83&quot;, &quot;1.73&quot;…
## $ G      &lt;chr&gt; &quot;48&quot;, &quot;46&quot;, &quot;47&quot;, &quot;46&quot;, &quot;49&quot;, &quot;48&quot;, &quot;45&quot;, &quot;3&quot;, &quot;30&quot;, &quot;46&quot;, &quot;31…
## $ GS     &lt;chr&gt; &quot;37&quot;, &quot;34&quot;, &quot;36&quot;, &quot;39&quot;, &quot;42&quot;, &quot;45&quot;, &quot;44&quot;, &quot;3&quot;, &quot;27&quot;, &quot;40&quot;, &quot;30…
## $ GF     &lt;chr&gt; &quot;11&quot;, &quot;10&quot;, &quot;9&quot;, &quot;7&quot;, &quot;7&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;, &quot;3&quot;, &quot;6&quot;, &quot;1&quot;, &quot;2&quot;, …
## $ CG     &lt;chr&gt; &quot;31&quot;, &quot;25&quot;, &quot;23&quot;, &quot;32&quot;, &quot;36&quot;, &quot;38&quot;, &quot;34&quot;, &quot;3&quot;, &quot;20&quot;, &quot;33&quot;, &quot;20…
## $ SHO    &lt;chr&gt; &quot;7&quot;, &quot;3&quot;, &quot;9&quot;, &quot;6&quot;, &quot;12&quot;, &quot;16&quot;, &quot;8&quot;, &quot;0&quot;, &quot;9&quot;, &quot;7&quot;, &quot;3&quot;, &quot;1&quot;, …
## $ SV     &lt;chr&gt; &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;1&quot;, &quot;3&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;, &quot;1&quot;, &quot;5&quot;, &quot;1&quot;, &quot;1&quot;, &quot;2…
## $ IP     &lt;chr&gt; &quot;367.0&quot;, &quot;310.1&quot;, &quot;306.1&quot;, &quot;355.0&quot;, &quot;376.1&quot;, &quot;389.0&quot;, &quot;388.0&quot;,…
## $ H      &lt;chr&gt; &quot;285&quot;, &quot;289&quot;, &quot;288&quot;, &quot;327&quot;, &quot;253&quot;, &quot;323&quot;, &quot;336&quot;, &quot;19&quot;, &quot;180&quot;, …
## $ R      &lt;chr&gt; &quot;133&quot;, &quot;133&quot;, &quot;106&quot;, &quot;133&quot;, &quot;86&quot;, &quot;90&quot;, &quot;107&quot;, &quot;7&quot;, &quot;51&quot;, &quot;96&quot;…
## $ ER     &lt;chr&gt; &quot;105&quot;, &quot;97&quot;, &quot;95&quot;, &quot;94&quot;, &quot;51&quot;, &quot;67&quot;, &quot;79&quot;, &quot;5&quot;, &quot;45&quot;, &quot;77&quot;, &quot;9…
## $ HR     &lt;chr&gt; &quot;5&quot;, &quot;11&quot;, &quot;9&quot;, &quot;8&quot;, &quot;3&quot;, &quot;6&quot;, &quot;4&quot;, &quot;0&quot;, &quot;3&quot;, &quot;8&quot;, &quot;10&quot;, &quot;8&quot;, …
## $ BB     &lt;chr&gt; &quot;129&quot;, &quot;105&quot;, &quot;75&quot;, &quot;76&quot;, &quot;64&quot;, &quot;50&quot;, &quot;56&quot;, &quot;3&quot;, &quot;38&quot;, &quot;69&quot;, &quot;…
## $ IBB    &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;…
## $ SO     &lt;chr&gt; &quot;227&quot;, &quot;195&quot;, &quot;159&quot;, &quot;214&quot;, &quot;241&quot;, &quot;167&quot;, &quot;200&quot;, &quot;15&quot;, &quot;121&quot;, …
## $ HBP    &lt;chr&gt; &quot;8&quot;, &quot;6&quot;, &quot;3&quot;, &quot;11&quot;, &quot;10&quot;, &quot;10&quot;, &quot;6&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;3&quot;,…
## $ BK     &lt;chr&gt; &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0…
## $ WP     &lt;chr&gt; &quot;4&quot;, &quot;5&quot;, &quot;3&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;3&quot;, &quot;1&quot;, &quot;4&quot;, &quot;2…
## $ BF     &lt;chr&gt; &quot;1440&quot;, &quot;1290&quot;, &quot;1234&quot;, &quot;1459&quot;, &quot;1435&quot;, &quot;1500&quot;, &quot;1529&quot;, &quot;98&quot;, …
## $ `ERA+` &lt;chr&gt; &quot;132&quot;, &quot;128&quot;, &quot;118&quot;, &quot;122&quot;, &quot;225&quot;, &quot;172&quot;, &quot;154&quot;, &quot;163&quot;, &quot;166&quot;,…
## $ FIP    &lt;chr&gt; &quot;2.83&quot;, &quot;3.13&quot;, &quot;2.66&quot;, &quot;2.26&quot;, &quot;1.82&quot;, &quot;2.12&quot;, &quot;1.84&quot;, &quot;1.54&quot;…
## $ WHIP   &lt;chr&gt; &quot;1.128&quot;, &quot;1.270&quot;, &quot;1.185&quot;, &quot;1.135&quot;, &quot;0.842&quot;, &quot;0.959&quot;, &quot;1.010&quot;,…
## $ H9     &lt;chr&gt; &quot;7.0&quot;, &quot;8.4&quot;, &quot;8.5&quot;, &quot;8.3&quot;, &quot;6.1&quot;, &quot;7.5&quot;, &quot;7.8&quot;, &quot;6.6&quot;, &quot;6.9&quot;,…
## $ HR9    &lt;chr&gt; &quot;0.1&quot;, &quot;0.3&quot;, &quot;0.3&quot;, &quot;0.2&quot;, &quot;0.1&quot;, &quot;0.1&quot;, &quot;0.1&quot;, &quot;0.0&quot;, &quot;0.1&quot;,…
## $ BB9    &lt;chr&gt; &quot;3.2&quot;, &quot;3.0&quot;, &quot;2.2&quot;, &quot;1.9&quot;, &quot;1.5&quot;, &quot;1.2&quot;, &quot;1.3&quot;, &quot;1.0&quot;, &quot;1.5&quot;,…
## $ SO9    &lt;chr&gt; &quot;5.6&quot;, &quot;5.7&quot;, &quot;4.7&quot;, &quot;5.4&quot;, &quot;5.8&quot;, &quot;3.9&quot;, &quot;4.6&quot;, &quot;5.2&quot;, &quot;4.6&quot;,…
## $ `SO/W` &lt;chr&gt; &quot;1.76&quot;, &quot;1.86&quot;, &quot;2.12&quot;, &quot;2.82&quot;, &quot;3.77&quot;, &quot;3.34&quot;, &quot;3.57&quot;, &quot;5.00&quot;…
## $ Awards &lt;chr&gt; &quot;MVP-3&quot;, &quot;MVP-22&quot;, &quot;&quot;, &quot;MVP-10&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;…</code></pre>
<p>Since we will want this data for all players, we need to reuse this code. Anytime you plan to reuse code, you should create a function. This will save copy and paste errors and allow you to modify it in the future without having to find every place in your code that you copy and pasted your initial process.</p>
<p>Let’s make a function that takes a players URL as input and outputs their year-by-year stats as a data frame.</p>
<pre class="r"><code>get_player_stats &lt;- function(url){
    
    data &lt;- url %&gt;% 
        read_html() %&gt;% 
        html_node(&#39;#pitching_standard&#39;) 
    
    #handles if the page does not have this table
    if(length(data) == 0){
        return(tibble::tibble())
    }
    
    data %&gt;% 
        html_table(fill = TRUE)
}

player_data &lt;- purrr::map(player_links, get_player_stats)
glimpse(player_data[[1]])</code></pre>
<pre><code>## Observations: 28
## Variables: 35
## $ Year   &lt;chr&gt; &quot;1911&quot;, &quot;1912&quot;, &quot;1913&quot;, &quot;1914&quot;, &quot;1915&quot;, &quot;1916&quot;, &quot;1917&quot;, &quot;1918&quot;…
## $ Age    &lt;chr&gt; &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;, &quot;31&quot;, &quot;32&quot;, &quot;33&quot;, &quot;3…
## $ Tm     &lt;chr&gt; &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;PHI&quot;, &quot;CHC&quot;, &quot;CHC&quot;,…
## $ Lg     &lt;chr&gt; &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;NL&quot;, &quot;N…
## $ W      &lt;chr&gt; &quot;28&quot;, &quot;19&quot;, &quot;22&quot;, &quot;27&quot;, &quot;31&quot;, &quot;33&quot;, &quot;30&quot;, &quot;2&quot;, &quot;16&quot;, &quot;27&quot;, &quot;15…
## $ L      &lt;chr&gt; &quot;13&quot;, &quot;17&quot;, &quot;8&quot;, &quot;15&quot;, &quot;10&quot;, &quot;12&quot;, &quot;13&quot;, &quot;1&quot;, &quot;11&quot;, &quot;14&quot;, &quot;13&quot;…
## $ `W-L%` &lt;chr&gt; &quot;.683&quot;, &quot;.528&quot;, &quot;.733&quot;, &quot;.643&quot;, &quot;.756&quot;, &quot;.733&quot;, &quot;.698&quot;, &quot;.667&quot;…
## $ ERA    &lt;chr&gt; &quot;2.57&quot;, &quot;2.81&quot;, &quot;2.79&quot;, &quot;2.38&quot;, &quot;1.22&quot;, &quot;1.55&quot;, &quot;1.83&quot;, &quot;1.73&quot;…
## $ G      &lt;chr&gt; &quot;48&quot;, &quot;46&quot;, &quot;47&quot;, &quot;46&quot;, &quot;49&quot;, &quot;48&quot;, &quot;45&quot;, &quot;3&quot;, &quot;30&quot;, &quot;46&quot;, &quot;31…
## $ GS     &lt;chr&gt; &quot;37&quot;, &quot;34&quot;, &quot;36&quot;, &quot;39&quot;, &quot;42&quot;, &quot;45&quot;, &quot;44&quot;, &quot;3&quot;, &quot;27&quot;, &quot;40&quot;, &quot;30…
## $ GF     &lt;chr&gt; &quot;11&quot;, &quot;10&quot;, &quot;9&quot;, &quot;7&quot;, &quot;7&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;, &quot;3&quot;, &quot;6&quot;, &quot;1&quot;, &quot;2&quot;, …
## $ CG     &lt;chr&gt; &quot;31&quot;, &quot;25&quot;, &quot;23&quot;, &quot;32&quot;, &quot;36&quot;, &quot;38&quot;, &quot;34&quot;, &quot;3&quot;, &quot;20&quot;, &quot;33&quot;, &quot;20…
## $ SHO    &lt;chr&gt; &quot;7&quot;, &quot;3&quot;, &quot;9&quot;, &quot;6&quot;, &quot;12&quot;, &quot;16&quot;, &quot;8&quot;, &quot;0&quot;, &quot;9&quot;, &quot;7&quot;, &quot;3&quot;, &quot;1&quot;, …
## $ SV     &lt;chr&gt; &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;1&quot;, &quot;3&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;, &quot;1&quot;, &quot;5&quot;, &quot;1&quot;, &quot;1&quot;, &quot;2…
## $ IP     &lt;chr&gt; &quot;367.0&quot;, &quot;310.1&quot;, &quot;306.1&quot;, &quot;355.0&quot;, &quot;376.1&quot;, &quot;389.0&quot;, &quot;388.0&quot;,…
## $ H      &lt;chr&gt; &quot;285&quot;, &quot;289&quot;, &quot;288&quot;, &quot;327&quot;, &quot;253&quot;, &quot;323&quot;, &quot;336&quot;, &quot;19&quot;, &quot;180&quot;, …
## $ R      &lt;chr&gt; &quot;133&quot;, &quot;133&quot;, &quot;106&quot;, &quot;133&quot;, &quot;86&quot;, &quot;90&quot;, &quot;107&quot;, &quot;7&quot;, &quot;51&quot;, &quot;96&quot;…
## $ ER     &lt;chr&gt; &quot;105&quot;, &quot;97&quot;, &quot;95&quot;, &quot;94&quot;, &quot;51&quot;, &quot;67&quot;, &quot;79&quot;, &quot;5&quot;, &quot;45&quot;, &quot;77&quot;, &quot;9…
## $ HR     &lt;chr&gt; &quot;5&quot;, &quot;11&quot;, &quot;9&quot;, &quot;8&quot;, &quot;3&quot;, &quot;6&quot;, &quot;4&quot;, &quot;0&quot;, &quot;3&quot;, &quot;8&quot;, &quot;10&quot;, &quot;8&quot;, …
## $ BB     &lt;chr&gt; &quot;129&quot;, &quot;105&quot;, &quot;75&quot;, &quot;76&quot;, &quot;64&quot;, &quot;50&quot;, &quot;56&quot;, &quot;3&quot;, &quot;38&quot;, &quot;69&quot;, &quot;…
## $ IBB    &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;…
## $ SO     &lt;chr&gt; &quot;227&quot;, &quot;195&quot;, &quot;159&quot;, &quot;214&quot;, &quot;241&quot;, &quot;167&quot;, &quot;200&quot;, &quot;15&quot;, &quot;121&quot;, …
## $ HBP    &lt;chr&gt; &quot;8&quot;, &quot;6&quot;, &quot;3&quot;, &quot;11&quot;, &quot;10&quot;, &quot;10&quot;, &quot;6&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;3&quot;,…
## $ BK     &lt;chr&gt; &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0…
## $ WP     &lt;chr&gt; &quot;4&quot;, &quot;5&quot;, &quot;3&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;3&quot;, &quot;1&quot;, &quot;4&quot;, &quot;2…
## $ BF     &lt;chr&gt; &quot;1440&quot;, &quot;1290&quot;, &quot;1234&quot;, &quot;1459&quot;, &quot;1435&quot;, &quot;1500&quot;, &quot;1529&quot;, &quot;98&quot;, …
## $ `ERA+` &lt;chr&gt; &quot;132&quot;, &quot;128&quot;, &quot;118&quot;, &quot;122&quot;, &quot;225&quot;, &quot;172&quot;, &quot;154&quot;, &quot;163&quot;, &quot;166&quot;,…
## $ FIP    &lt;chr&gt; &quot;2.83&quot;, &quot;3.13&quot;, &quot;2.66&quot;, &quot;2.26&quot;, &quot;1.82&quot;, &quot;2.12&quot;, &quot;1.84&quot;, &quot;1.54&quot;…
## $ WHIP   &lt;chr&gt; &quot;1.128&quot;, &quot;1.270&quot;, &quot;1.185&quot;, &quot;1.135&quot;, &quot;0.842&quot;, &quot;0.959&quot;, &quot;1.010&quot;,…
## $ H9     &lt;chr&gt; &quot;7.0&quot;, &quot;8.4&quot;, &quot;8.5&quot;, &quot;8.3&quot;, &quot;6.1&quot;, &quot;7.5&quot;, &quot;7.8&quot;, &quot;6.6&quot;, &quot;6.9&quot;,…
## $ HR9    &lt;chr&gt; &quot;0.1&quot;, &quot;0.3&quot;, &quot;0.3&quot;, &quot;0.2&quot;, &quot;0.1&quot;, &quot;0.1&quot;, &quot;0.1&quot;, &quot;0.0&quot;, &quot;0.1&quot;,…
## $ BB9    &lt;chr&gt; &quot;3.2&quot;, &quot;3.0&quot;, &quot;2.2&quot;, &quot;1.9&quot;, &quot;1.5&quot;, &quot;1.2&quot;, &quot;1.3&quot;, &quot;1.0&quot;, &quot;1.5&quot;,…
## $ SO9    &lt;chr&gt; &quot;5.6&quot;, &quot;5.7&quot;, &quot;4.7&quot;, &quot;5.4&quot;, &quot;5.8&quot;, &quot;3.9&quot;, &quot;4.6&quot;, &quot;5.2&quot;, &quot;4.6&quot;,…
## $ `SO/W` &lt;chr&gt; &quot;1.76&quot;, &quot;1.86&quot;, &quot;2.12&quot;, &quot;2.82&quot;, &quot;3.77&quot;, &quot;3.34&quot;, &quot;3.57&quot;, &quot;5.00&quot;…
## $ Awards &lt;chr&gt; &quot;MVP-3&quot;, &quot;MVP-22&quot;, &quot;&quot;, &quot;MVP-10&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;…</code></pre>
<p>One note with web scraping: error handling is a must when collecting data from numerous pages. You often run into unexpected formatting or a slight change in the page structure that will break your process. If you are scraping 100s of pages, you would hate to complete 95% of your collection only to have an unhandled error cause the process to stop, all collected data to be lost, fix the error, and rerun the whole process again.</p>
<p>For example, if you inspect the returned results from the player pages above, you will notice two players did not return results.</p>
<pre class="r"><code>rows &lt;- purrr::map_dbl(player_data, function(x) dim(x)[1])
player_links[rows == 0]</code></pre>
<pre><code>## [1] &quot;https://www.baseball-reference.com/players/r/ruthba01.shtml&quot;
## [2] &quot;https://www.baseball-reference.com/players/w/wardjo01.shtml&quot;</code></pre>
<p>Both of these players were not primarily pitchers and have a different structure to their page. If we had not added if statement that checks if the webpage has our selector, the collection process would have broke and all data would have to be recollected.</p>
<p>This is part of the pain with web scraping and an important fact to keep in mind when estimating the feasibility of a task and the time it will take to complete it. What appears to be a simple task can turn into a long reverse engineering project.</p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Hopefully you have a basic understanding of web scraping. To close out, let’s review the keys to successful web scraping:</p>
<ol style="list-style-type: decimal">
<li>Understand HTML elements and CSS selectors</li>
<li>Inspect your returned data</li>
<li>Write functions for reuse</li>
<li>Include error handling to prevent data and time loss</li>
<li>Conduct thorough research and tests before estimating the difficulty of a project</li>
</ol>
</div>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2022-01-27-nyt-plots/" data-toggle="tooltip" data-placement="top" title="Advanced Data Visualization with R and ggplot2: Recreating the New York Times COVID Tracker">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2022-04-11-excel-tools/" data-toggle="tooltip" data-placement="top" title="Excel Tools">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        <a href="/tags/bokeh" title="bokeh">
                            bokeh
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/ggplot2" title="ggplot2">
                            ggplot2
                        </a>
                        
                        
                        
                        <a href="/tags/mlb" title="mlb">
                            mlb
                        </a>
                        
                        
                        
                        <a href="/tags/nhl" title="nhl">
                            nhl
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/python" title="python">
                            python
                        </a>
                        
                        
                        
                        <a href="/tags/r" title="r">
                            r
                        </a>
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="Nick Paul&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:nickryanpaul@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/nickpaul7">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/nick-paul-8b466818/">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Nick Paul&#39;s Blog 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
